# Методы оптимизации потребления ресурсов при страничной организации виртуальной памяти. Сегментно-страничная организация виртуальной памяти.
## Методы оптимизации потребления ресурсов при страничной организации виртуальной памяти

### Использование TLB-кэша (Translation Lookaside Buffer)
- TLB-кэш хранит недавно использованные строки таблицы страниц, что позволяет быстро преобразовывать виртуальные адреса в физические без обращения к основной таблице страниц.  
- Это уменьшает количество обращений к памяти и ускоряет работу системы.
### Оптимизация стратегий страничного обмена (swapping)
- **Бит доступа (A):** Страницы с нулевым битом доступа считаются менее востребованными и могут быть выбраны для вытеснения.  
- **Бит изменения (W):** Если страница не изменялась (бит W = 0), её можно не записывать на диск при вытеснении, так как на диске уже есть её актуальная копия.  
- **Активные и неактивные списки (Linux):** Страницы перемещаются между списками активных и неактивных страниц, что помогает эффективно выбирать кандидатов для вытеснения.
### Page Cache
- Страницы, связанные с файлами, кэшируются в оперативной памяти. Это уменьшает количество операций ввода-вывода, так как данные считываются и записываются на диск не сразу, а при необходимости.  
- Позволяет группировать операции записи и чтения, повышая производительность.
### Предварительная загрузка (prefetching)
- Операционная система может заранее загружать страницы, которые, вероятно, понадобятся в ближайшее время, основываясь на шаблонах доступа к памяти.
## Сегментно-страничная организация виртуальной памяти
Сегментно-страничная организация объединяет преимущества сегментного и страничного подходов:
### Логическая сегментация  
- Адресное пространство процесса делится на логические сегменты, такие как:  
	- **Code (text):** Исполняемые инструкции.  
	- **Data:** Инициализированные и неинициализированные данные.  
	- **Heap:** Динамически выделяемая память.  
	- **Stack:** Стек вызовов.  
	- **Memory-mapped files (mmap):** Файлы, отображённые в память.  
- Каждый сегмент имеет свои атрибуты (размер, права доступа и т.д.).
### Страничная организация внутри сегментов**  
- Каждый сегмент разбивается на страницы фиксированного размера (например, 4 Кб).  
- Это позволяет эффективно управлять памятью, избегая внешней фрагментации.
### Преимущества  
- **Гибкость:** Сегменты отражают логическую структуру программы, а страницы обеспечивают эффективное использование памяти.  
- **Защита:** Разные сегменты могут иметь разные права доступа (например, код только для чтения, стек для чтения/записи).  
- **Оптимизация:** Часто используемые сегменты (например, код) могут оставаться в памяти, а редко используемые — вытесняться на диск.
### Пример реализации  
- В Linux используется сегментно-страничная модель, где каждый сегмент (code, heap, stack и т.д.) имеет свою таблицу страниц.  
- Это позволяет ускорить доступ к часто используемым данным и уменьшить количество страничных прерываний.