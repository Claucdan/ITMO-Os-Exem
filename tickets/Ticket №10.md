# Понятия процесса, потока, нити, задания. Их определения, назначение и различия между собой.
![[Pasted image 20250622132213.png]]
## Процесс (Process) 
#### Определение
Процесс — это совокупность исполняемых команд, ассоциированных с ним ресурсов (память, файлы, сетевые соединения и т. д.) и контекста исполнения (регистры, стек, состояние процессора), управляемая операционной системой (ОС).  
#### Назначение 
- Изоляция программ: каждый процесс работает в своём адресном пространстве и не может напрямую влиять на другие процессы.  
- Распределение ресурсов: ОС выделяет процессам CPU-время, память и другие ресурсы.  
- Многозадачность: позволяет выполнять несколько программ одновременно.  
#### Особенности
- Даже если одна программа запущена несколько раз, это разные процессы (у них разные ресурсы и контекст).  
- Управляется ОС (пользователь может только менять приоритет).  
- В Linux процессы образуют дерево с корнем в `init/systemd` (PID=1) и `kthreadd` (PID=2).  
## Поток (Thread) 
#### Определение 
Поток (нить) — это набор исполняемых команд и контекста исполнения, который разделяет общие ресурсы (память, файлы) с другими потоками в рамках одного процесса.  
#### Назначение 
- Параллельное выполнение задач внутри одного процесса.  
- Эффективное использование многоядерных процессоров.  
#### Особенности
- Потоки одного процесса используют общую память, что требует синхронизации (мьютексы, семафоры).  
- Управляются ОС (вытесняющая многозадачность).  
- В Linux процесс технически тоже является потоком, но с изолированными ресурсами.  
#### Проблемы
- Нарушение изоляции: потоки могут влиять друг на друга через общую память.  
- Сложность синхронизации: возможны гонки данных (race conditions).  
## Легковесный поток (Fiber / Flyweight Thread)
#### Определение
Легковесный поток — это поток, управляемый не ОС, а самим приложением (или языком программирования).  
#### Назначение  
- Более эффективное переключение между задачами (без переключения контекста ядра).  
- Используется в асинхронном программировании (например, корутины в Python, goroutines в Go).  
#### Особенности
- ОС не знает о таких потоках, они прозрачны для ядра.  
- Переключение между ними происходит в пользовательском режиме, что быстрее.  
## Задание / Контрольная группа (Job / cgroup)
#### Определение
- **В Windows (Job)** — именованный объект, который управляет атрибутами группы процессов (например, ограничение CPU, памяти, принудительное завершение).  
- **В Linux (cgroup)** — механизм ядра для изоляции и ограничения ресурсов группы процессов.  
#### Назначение 
- Ограничение ресурсов (CPU, память, дисковый ввод-вывод).  
- Управление группами процессов (например, завершение всех процессов в задании).
#### Особенности 
- В Linux cgroups используются для контейнеризации (Docker, LXC).  
- В Windows задания позволяют контролировать процессы как единое целое.  
## Различия между процессами, потоками и легковесными потоками

|                        | *Процесс*                            | *Поток (Thread)*             | *Легковесный поток (Fiber)* |
| ---------------------- | ---------------------------------- | -------------------------- | ------------------------- |
| **Изоляция**           | Полная (своя память)               | Частичная (общая память)   | Нет (управляется вручную) |
| **Управление**         | ОС                                 | ОС                         | Приложение / ЯП           |
| **Ресурсы**            | Собственные                        | Разделяемые в процессе     | Зависит от реализации     |
| **Создание**           | `fork()` + `exec()` (Linux)        | `clone()` (Linux)          | Библиотеки языка          |
| **Синхронизация**      | Не требуется                       | Нужна (мьютексы, семафоры) | Зависит от реализации     |
| **Производительность** | Медленнее (переключение контекста) | Быстрее процессов          | Максимально быстрое       |
