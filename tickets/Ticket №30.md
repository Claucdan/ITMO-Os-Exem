# Методы организации хранения данных в файловых системах: индексные дескрипторы.
## Индексные дескрипторы (i-nodes)
Cтруктура данных, используемая в файловых системах для хранения метаинформации о файлах и организации доступа к их данным.
![](Pasted%20image%2020250623154222.png)
## Особенности метода
### Структура i-node
- Каждый файл и каталог имеет свой уникальный i-node, который содержит:
	- Метаданные (атрибуты файла: права доступа, владелец, размер, временные метки и т.д.).
	- Указатели на блоки данных файла (карту размещения).
- В примере из лекции i-node содержит 15 указателей:
	- 12 прямых указателей на блоки данных.
	- 1 указатель на блок с косвенной адресацией (хранит адреса блоков данных).
	- 1 указатель на блок с двойной косвенной адресацией (адреса блоков, которые содержат адреса данных).
	- 1 указатель на блок с тройной косвенной адресацией (для очень больших файлов).
### Журналирование (ext3)
Для повышения надежности в ext3 добавлено журналирование:
- **Journal**: записывает сами данные и метаданные в журнал перед изменением.
- **Ordered**: записывает только метаданные, синхронизируя их с данными.
- **Writeback**: записывает метаданные после данных, что быстрее, но менее надежно.
### Улучшения в ext4
- Увеличен размер i-node.
- Использование экстентов (деревья вместо списков) для ускорения доступа к данным.
- Оптимизация структуры каталогов (двоичные деревья вместо списков).
### NTFS
   - В NTFS i-nodes хранятся в главной файловой таблице (MFT), которая сама является файлом.
   - MFT динамически расширяется и поддерживает жесткие ссылки.
## Преимущества
- Эффективность для маленьких файлов (прямые указатели).
- Поддержка больших файлов за счет многоуровневой адресации.
- Надежность (особенно с журналированием).
## Недостатки
- Накладные расходы при косвенной адресации для больших файлов.
- Ограничения на максимальное количество файлов (из-за фиксированного числа i-nodes).